{"ast":null,"code":"//import { json } from 'express/lib/response';\n\nimport axios from 'axios';\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue';\nimport Vue from \"vue\";\nimport { Preferences } from '@capacitor/preferences';\nimport { BarcodeScanner } from '@capacitor-community/barcode-scanner';\nimport { Filesystem } from '@capacitor/filesystem';\n// import 'vue-carousel/dist/carousel.css';\nimport { Carousel, Slide } from 'vue-carousel';\nexport default {\n  name: \"App\",\n  components: {\n    PulseLoader,\n    Carousel,\n    Slide\n  },\n  mixins: [],\n  data() {\n    return {\n      imageBase64: '',\n      uri: '',\n      loading: false,\n      imageData: [],\n      selectedImages: [],\n      video: null,\n      montageplatz: '',\n      baugruppe: '',\n      auftrag: '',\n      name: '',\n      freitext: \"\",\n      selected: [],\n      showModal: false,\n      showModalV: false,\n      showModalF: false,\n      showModalB: false,\n      showModalBScan: false,\n      showModalA: false,\n      showModalAScan: false,\n      showModalEinst: false,\n      showModalVVorschau: false,\n      showModalBVorschau: false,\n      showModalBEditor: false,\n      showModalProblem: false,\n      problemDescription: '',\n      displayScan: true,\n      AuswahlAbteilungen: [],\n      BetroffeneAbteilungen: '',\n      AuswahlGrund: [],\n      GewaehlteGruende: '',\n      AuswahlVerantwortliche: [],\n      GewaehlteVerantwortliche: '',\n      RepertoireAbteilungen: ['Elektronik'],\n      RepertoireGruende: {\n        'Elektronik': ['Fehler Ladeelektronik', 'Fehler Modbus']\n      },\n      RepertoireVerantwortliche: {\n        'Elektronik': ['Test Person']\n      },\n      MoeglicheGruende: [],\n      MoeglicheVerantwortliche: [],\n      clearAuswahlAbteilungen: false,\n      clearAuswahlGrund: false,\n      clearAuswahlVerantwortliche: false,\n      spinner: {\n        color: 'white',\n        size: '30px',\n        margin: '2px',\n        radius: '100%'\n      },\n      modelhost: '',\n      tmp_modelhost: '',\n      modellidentifikation: '',\n      tmp_modellidentifikation: '',\n      showModalLizenz: false,\n      Modell: {},\n      Modelle: [],\n      pref: {},\n      useDefaultUI: true,\n      bildpfad: \"\",\n      queryInput: {\n        montageplatz: '',\n        baugruppe: '',\n        auftrag: '',\n        freitext: '',\n        AuswahlAbteilungen: [],\n        AuswahlGrund: [],\n        AuswahlVerantwortliche: [],\n        photo: '',\n        video: '',\n        report: ''\n      },\n      isRecording: false,\n      // recording mode identifier\n      isFinished: false,\n      // finished recording - action buttons indicator\n      recorder: null,\n      // component wide MediaRecorder\n      videoUrl: null,\n      // link to video - assigned when done writing video file\n      stream: null,\n      // Canvas\n      canvas: null,\n      ctx: null,\n      img: new Image(),\n      isDrawing: false,\n      editMode: false,\n      colors: ['red', 'yellow', 'green', 'blue', 'white', 'black'],\n      lightColors: ['red', 'yellow', 'white'],\n      darkColors: ['green', 'blue', 'black'],\n      selectedColor: 'red' // Default selected color\n      // Canvas Ende\n      // Carousel\n      //  settings: {\n      //     itemsToShow: 1,\n      //     snapAlign: 'center',\n      //   },\n      //   breakpoints: {\n      //     700: {\n      //       itemsToShow: 3.5,\n      //       snapAlign: 'center',\n      //     },\n      //     1024: {\n      //       itemsToShow: 5,\n      //       snapAlign: 'start',\n      //     },\n      //   },\n      // Carousel Ende\n    };\n  },\n\n  async beforeMount() {\n    console.log(\"Funktion beforeMount\");\n    this.initialisieren();\n    this.queriesAbfragen();\n  },\n  watch: {\n    showModalBEditor(newValue) {\n      if (newValue) {\n        if (this.$refs.canvas) {\n          this.initializeCanvas();\n        } else {\n          this.$nextTick(() => {\n            this.initializeCanvas();\n          });\n        }\n      } else {\n        this.stopDrawing();\n      }\n    }\n    // Variante fÃ¼r 1 Bild\n    // imageData(newImageData, oldImageData) {\n    //   if (newImageData !== oldImageData && newImageData != null) {\n    //     this.showModalBEditor = true;\n    //   }\n    // },\n\n    // imageData(newImageData, oldImageData) {\n    //   if (newImageData !== oldImageData && newImageData.length > 0) {\n    //     this.selectedImages.push(newImageData);\n    //     this.showModalBEditor = true;\n    //   }\n    // },\n  },\n\n  mounted() {\n    console.log(\"Funktion mounted\");\n    /*const items = this.$capacitor.getIntent().getAction().getItems();\n    for (let i = 0; i < items.length; i++)\n    {\n      const item = items[i];\n      const uri = item.getUri();\n      const mimeType = item.getType();\n    }*/\n  },\n\n  methods: {\n    openVideo() {\n      console.log(\"Funktion openVideo\");\n      this.$refs.videoRec.setAttribute('autoplay', '');\n      this.$refs.videoRec.setAttribute('muted', '');\n      this.$refs.videoRec.setAttribute('playsinline', '');\n      if (this.videoUrl != null) {\n        this.initPlayer();\n      } else {\n        this.resetVideo();\n      }\n    },\n    initPlayer() {\n      console.log(\"Funktion initPlayer\");\n      //this.$refs.videoRec.autoplay = true;\n      this.$refs.videoRec.controls = true;\n      this.$refs.videoRec.src = this.videoUrl;\n      this.$refs.videoRec.srcObject = null;\n    },\n    resetVideo() {\n      console.log(\"Funktion resetVideo\");\n      this.isFinished = false;\n      this.isRecording = false;\n      this.isLoading = true;\n      this.videoUrl = null;\n      //this.$refs.videoRec.controls = false;\n      //this.$refs.videoRec.autoplay = true;\n\n      navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        },\n        audio: false\n      }).then(this.gotStream).catch(() => this.isValid = false);\n    },\n    // start recoording\n    record() {\n      console.log(\"Funktion record\");\n      this.recorder.start();\n      console.log(\"Funktion start\");\n      this.isRecording = true;\n      console.log(\"Funktion isRecording\");\n      this.$refs.videoRec.controls = false;\n      console.log(\"Funktion controls\");\n      setTimeout(this.stop, 6000);\n      console.log(\"Funktion setTimeout\");\n    },\n    // stop recording\n    stop() {\n      console.log(\"Funktion stop\");\n      this.recorder.stop();\n      this.isRecording = false;\n      this.isFinished = true;\n      //this.$refs.videoRec.load();\n    },\n\n    // reset video diaply and emit video file url\n    endVideo() {\n      console.log(\"Funktion endVideo\");\n      this.stream.getTracks().forEach(function (track) {\n        track.stop();\n      });\n    },\n    // initialize MediaRecorder and video element source\n    gotStream(mediaStream) {\n      console.log(\"Funktion gotStream\");\n      this.recorder = new MediaRecorder(mediaStream, {\n        mimeType: \"video/mp4\" //video/webm unter nicht-ios!!\n        //audioBitsPerSecond: 128000\n      });\n\n      this.recorder.prepare();\n      if (mediaStream == null) console.log(\"mediastream ist null\");\n      if (this.recorder == null) console.log(\"recorder ist null\");\n      this.recorder.ondataavailable = this.videoDataHandler;\n      this.$refs.videoRec.src = null;\n      this.$refs.videoRec.srcObject = mediaStream;\n      this.stream = mediaStream;\n    },\n    // handle sending data for writing using the given WebSocket\n    videoDataHandler(event) {\n      this.$refs.videoRec.src = null;\n      this.videoUrl = window.URL.createObjectURL(event.data);\n      this.$refs.videoRec.src = this.videoUrl;\n      this.$refs.videoRec.srcObject = null;\n      this.initPlayer();\n      /*this.$refs.videoPlayer.src = this.videoUrl;\n      this.$refs.videoPlayer.srcObject = null;\n      this.$refs.videoPlayer.load();*/\n    },\n\n    queriesAbfragen() {\n      /*console.log(\"Funktion queriesAbfragen\");\n      var queries = this.$route.query;\n      var keys = Object.keys(queries);\n       if (keys.length > 0)\n      {\n        if (keys.includes('montageplatz')) this.montageplatz = queries['montageplatz'];\n        if (keys.includes('baugruppe')) this.montageplatz = queries['baugruppe'];\n        if (keys.includes('auftrag')) this.montageplatz = queries['auftrag'];\n        if (keys.includes('freitext')) this.montageplatz = queries['freitext'];\n        if (keys.includes('photo')) {\n          const readFilePath = async () => {\n            const contents = await Filesystem.readFile({\n              path: queries['photo']\n            });\n             console.log('data:', contents);\n          };\n        }\n      }*/\n    },\n    textboxfokus(id) {\n      console.log(\"textboxfokus \" + id);\n      document.getElementById(id).focus();\n    },\n    async afterOpenScan() {\n      console.log(\"Funktion afterOpenScan\");\n      const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\n      BarcodeScanner.showBackground();\n      if (result.hasContent) {\n        this.auftrag = result.content;\n      }\n    },\n    async scanAuftrag() {\n      console.log(\"Funktion scanAuftrag\");\n      this.displayScan = false;\n      var body = document.getElementsByTagName('body')[0];\n      body.style.backgroundImage = 'none';\n      const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\n\n      this.displayScan = true;\n      body.style.backgroundImage = 'url(Logo_kombiniert.png)';\n      if (result.hasContent) {\n        this.auftrag = result.content;\n      }\n    },\n    async scanBaugruppe() {\n      console.log(\"Funktion scanBaugruppe\");\n      this.displayScan = false;\n      var body = document.getElementsByTagName('body')[0];\n      body.style.backgroundImage = 'none';\n      const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\n\n      this.displayScan = true;\n      body.style.backgroundImage = 'url(Logo_kombiniert.png)';\n      if (result.hasContent) {\n        this.baugruppe = result.content;\n      }\n    },\n    async scanEnde() {\n      console.log(\"Funktion scanEnde\");\n      await BarcodeScanner.stopScan(); // start scanning and wait for a result\n\n      var body = document.getElementsByTagName('body')[0];\n      body.style.backgroundImage = 'url(Logo_kombiniert.png)';\n      this.displayScan = true;\n    },\n    dataURLtoFile: function (dataurl, filename) {\n      console.log(\"Funktion dataURLtoFile\");\n      var arr = dataurl.split(','),\n        mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]),\n        n = bstr.length,\n        u8arr = new Uint8Array(n);\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n      return new File([u8arr], filename, {\n        type: mime\n      });\n    },\n    removeImage() {\n      console.log(\"Funktion removeImage\");\n      var bild = document.getElementById('bild');\n      bild.value = \"\";\n      var e = {};\n      e.target = {};\n      e.target.files = null;\n      this.onImageChange(e);\n    },\n    removeImages() {\n      // in absteigender Reihenfolge sortieren, um die Indizes beim Splicing nicht durcheinander zu bringen\n      this.selectedImages.sort((a, b) => b - a);\n      this.selectedImages.forEach(index => {\n        this.imageData.splice(index, 1);\n      });\n      this.selectedImages = [];\n    },\n    removeVideo() {\n      console.log(\"Funktion removeVideo\");\n      this.video = null;\n    },\n    onImageChange(e) {\n      console.log(\"Funktion onImageChange\");\n      var addButton = document.getElementById('bild_add');\n      var editButton = document.getElementById('bild_edit');\n      var remButton = document.getElementById('bild_rem');\n      const files = e.target.files;\n      // Auskommentiert ist immer die Variante fÃ¼r 1 Bild\n      // this.imageData = null;\n      this.imageData = []; // imageData zurÃ¼cksetzen\n\n      if (files) {\n        addButton.style.color = \"grey\";\n        editButton.style.color = \"black\";\n        remButton.style.color = \"red\";\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => {\n            // this.imageData = reader.result;\n            this.imageData.push(reader.result);\n            // this.img.src = this.imageData;\n          };\n\n          this.bildpfad = file;\n        }\n      } else {\n        addButton.style.color = \"green\";\n        editButton.style.color = \"grey\";\n        remButton.style.color = \"grey\";\n      }\n    },\n    selectImage(index) {\n      const selectedIndex = this.selectedImages.indexOf(index);\n      // Toggle Funktion zum Aus-/AbwÃ¤hlen von Bildern\n      if (selectedIndex === -1) {\n        // Bild ist noch nicht ausgewÃ¤hlt, also auswÃ¤hlen\n        this.selectedImages.push(index);\n      } else {\n        // Bild ist bereits ausgewÃ¤hlt, also abwÃ¤hlen\n        this.selectedImages.splice(selectedIndex, 1);\n      }\n    },\n    // openEditor(index) {\n    //   if (this.showModalBEditor) {\n    //     // Ãnderungen speichern\n    //     this.saveEdits();\n    //   }\n    //   // Editor mit ausgewÃ¤hlten Bild Ã¶ffnen\n    //   this.img.src = this.imageData[index];\n    //   this.showModalBEditor = true;\n    // },\n\n    // Canvas\n    initializeCanvas() {\n      if (!this.imageData) {\n        return;\n      }\n      this.$nextTick(() => {\n        this.canvas = this.$refs.canvas;\n        this.ctx = this.canvas.getContext(\"2d\");\n\n        // Create a new image object\n        let img = new Image();\n\n        // When the image has loaded, draw it on the canvas\n        img.onload = () => {\n          this.canvas.width = img.width;\n          this.canvas.height = img.height;\n          this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n          this.editMode = true;\n        };\n\n        // Start loading the image\n        img.src = this.imageData;\n      });\n    },\n    getEventCoords(e) {\n      const event = e.type.startsWith('touch') ? e.touches[0] : e;\n      const rect = this.canvas.getBoundingClientRect();\n      // Calculate the scale factor\n      const scaleX = this.canvas.width / rect.width;\n      const scaleY = this.canvas.height / rect.height;\n      return {\n        x: (event.clientX - rect.left) * scaleX,\n        y: (event.clientY - rect.top) * scaleY\n      };\n    },\n    startDrawing(e) {\n      if (!this.editMode) return;\n      this.isDrawing = true;\n      this.ctx.strokeStyle = this.selectedColor;\n      this.ctx.beginPath();\n      const coords = this.getEventCoords(e);\n      this.ctx.moveTo(coords.x, coords.y);\n    },\n    draw(e) {\n      if (!this.isDrawing) return;\n      const coords = this.getEventCoords(e);\n      this.ctx.lineWidth = 8;\n      this.ctx.lineTo(coords.x, coords.y);\n      this.ctx.stroke();\n    },\n    stopDrawing() {\n      this.isDrawing = false;\n    },\n    saveEdits() {\n      this.imageData = this.canvas.toDataURL(\"image/jpeg\", 0.7);\n      this.$nextTick(() => {\n        this.showModalBEditor = false;\n      });\n      this.editMode = false;\n    },\n    drawImageOnCanvas() {\n      const img = this.$refs.imageInModal;\n      this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n    },\n    saveImage() {\n      const link = document.createElement(\"a\");\n      link.href = this.canvas.toDataURL(\"image/jpeg\", 0.7);\n      link.download = \"edited-image.jpeg\";\n      link.click();\n    },\n    cancelEditing() {\n      this.showModalBEditor = false;\n      this.editMode = false;\n    },\n    // Canvas Ende\n    // Problemmeldung\n    reportProblem() {\n      //var host = this.modelhost;//'http://' + window.location.hostname;\n      var host = 'http://127.0.0.1:4000'; // Host auf Port 4000 geÃ¤ndert, da sonst CORS Fehler\n      let content = {\n        description: this.problemDescription\n      };\n      axios({\n        method: 'post',\n        url: host + '/feedback',\n        data: content\n      }).then(response => {\n        if (response.status == 200) {\n          alert(\"Erfolgreich gemeldet!\");\n          this.showModalProblem = false;\n          this.problemDescription = '';\n        } else {\n          alert(\"Melden fehlgeschlagen!\");\n        }\n      }).catch(error => {\n        alert(\"Melden fehlgeschlagen! \" + error);\n      });\n    },\n    cancelProblemReport() {\n      this.showModalProblem = false;\n      this.problemDescription = '';\n    },\n    // Problemmeldung Ende\n    hostGeaendert() {\n      console.log(\"Funktion hostGeaendert\");\n      this.AuswahlAbteilungen = [];\n      this.AuswahlGrund = [];\n      this.AuswahlVerantwortliche = [];\n      this.clearAuswahlAbteilungen = !this.clearAuswahlAbteilungen;\n      this.changeAbteilung();\n      var vm = this;\n      axios.get(this.modelhost + '/Modelle').then(function (response) {\n        console.log(\"axios.get Modelle\");\n        vm.Modelle = response.data;\n        console.log(vm.Modelle);\n      }).catch(function (error) {\n        console.log(\"axios.get Fehler: \" + error.message);\n      }).finally(function () {});\n\n      //wenn aktuelle modellidentifikation nicht enthalten ist, muss die liste und die auswahl ebenfalls aktualisiert werden\n    },\n\n    async einstellungHolen(key, standard) {\n      console.log(\"Funktion einstellungHolen\");\n      console.log(\"Einstellung holen: \" + key);\n      const preferences = await Preferences.keys();\n      console.log(\"existierende Einstellungen: \" + preferences.toString());\n      if (preferences.keys.includes(key)) {\n        const r = (await Preferences.get({\n          key: key\n        })).value;\n        console.log(\"Einstellung vorhanden, Wert: \" + r);\n        return r;\n      }\n      console.log(\"Einstellung nicht vorhanden, Standardwert: \" + standard);\n      return standard;\n    },\n    async einstellungenPruefen(key, value) {\n      console.log(\"Funktion einstellungenPruefen\");\n      const preferences = await Preferences.keys();\n      if (!preferences.keys.includes(key)) {\n        await Preferences.set({\n          key: key,\n          value: value\n        });\n      }\n    },\n    async initialisieren() {\n      console.log(\"Funktion initialisieren\");\n      const status = BarcodeScanner.checkPermission({\n        force: true\n      });\n      //BarcodeScanner.prepare();\n\n      await this.einstellungenPruefen('host', 'http://' + window.location.hostname + ':4000');\n      await this.einstellungenPruefen('modellidentifikation', 'Beispielmodell.json');\n      await this.einstellungenPruefen('montageplatz', 'Beispielplatz');\n      this.modelhost = await this.einstellungHolen('host', 'http://' + window.location.hostname + ':4000');\n      this.modellidentifikation = await this.einstellungHolen('modellidentifikation', 'Beispielmodell.json');\n      this.montageplatz = await this.einstellungHolen('montageplatz', 'Beispielplatz');\n      this.hostGeaendert();\n      this.modellInitialisieren();\n    },\n    anderesmodell() {\n      console.log(\"funktion anderesmodell\");\n      this.modellInitialisieren();\n    },\n    modellInitialisieren() {\n      console.log(\"funktion modellInitialisieren\");\n      var vm = this;\n      if (this.modellidentifikation == '') {\n        console.log(\"modellidentifikation leer\");\n      } else {\n        axios.get(this.modelhost + '/Modelle/' + this.modellidentifikation).then(function (response) {\n          console.log(response.data);\n          vm.Modell = response.data;\n          vm.RepertoireAbteilungen = response.data.RepertoireAbteilungen;\n          vm.RepertoireGruende = response.data.RepertoireGruende;\n          vm.RepertoireVerantwortliche = response.data.RepertoireVerantwortliche;\n          vm.Ziele = vm.Modell.VerantwortlicheAdressen;\n        });\n      }\n    },\n    modellSelectedSetzen() {\n      //this.tmp_modelhost = this.modelhost;\n      var modellSelect = document.getElementById('modellSelect');\n      for (var i = 0; i < modellSelect.options.length; i++) {\n        if (modellSelect.options[i].value == this.modellidentifikation) {\n          modellSelect.options.selectedIndex = i;\n          break;\n        }\n      }\n    },\n    modelleInitialisieren() {\n      var vm = this;\n      axios.get(this.modelhost + '/Modelle/' + this.modellidentifikation).then(function (response) {\n        console.log(response.data);\n        vm.Modell = response.data;\n        vm.RepertoireAbteilungen = response.data.RepertoireAbteilungen;\n        vm.RepertoireGruende = response.data.RepertoireGruende;\n        vm.RepertoireVerantwortliche = response.data.RepertoireVerantwortliche;\n        vm.Ziele = vm.Modell.VerantwortlicheAdressen;\n        Vue.nextTick(() => {\n          const params = new URLSearchParams(window.location.search);\n          var ref_shortened = [];\n          for (var ref in vm.$refs) {\n            if (ref.length > 3) {\n              ref_shortened.push(ref.substring(3));\n            }\n          }\n          if (params.has('abt')) {\n            const abt_query = params.get('abt');\n            const abt_array = abt_query.split(\";\");\n            abt_array.forEach(element => {\n              if (Array.prototype.includes.call(ref_shortened, element)) {\n                vm.$refs['abt' + element][0].handleClick();\n                vm.AuswahlAbteilungen.push(element);\n              }\n            });\n          }\n          if (params.has('gdk')) {\n            const gdk_query = params.get('gdk');\n            const gdk_array = gdk_query.split(\";\");\n            gdk_array.forEach(element => {\n              if (Array.prototype.includes.call(ref_shortened, element)) {\n                vm.$refs['gdk' + element][0].handleClick();\n                vm.AuswahlGrund.push(element);\n              }\n            });\n          }\n          if (params.has('ver')) {\n            const ver_query = params.get('ver');\n            const ver_array = ver_query.split(\";\");\n            ver_array.forEach(element => {\n              if (Array.prototype.includes.call(ref_shortened, element)) {\n                vm.$refs['ver' + element][0].handleClick();\n                vm.AuswahlVerantwortliche.push(element);\n              }\n            });\n          }\n        });\n      }).finally(function () {});\n    },\n    async einstellungenSpeichern(event) {\n      console.log(\"einstellungenSpeichern: \");\n      console.log(\"montageplatz: \" + this.montageplatz);\n      if (this.modelhost != this.tmp_modelhost) {\n        console.log(\"Speichere modelhost: \" + this.modelhost);\n        await Preferences.set({\n          key: 'host',\n          value: this.modelhost\n        });\n        this.hostGeaendert();\n      } else {\n        console.log(\"modelhost unverÃ¤ndert\");\n      }\n      await Preferences.set({\n        key: 'montageplatz',\n        value: this.montageplatz\n      });\n      var modellSelect = document.getElementById('modellSelect');\n      try {\n        var val = modellSelect.options[modellSelect.options.selectedIndex].value;\n        if (val != this.modellidentifikation) {\n          this.modellidentifikation = val;\n          console.log(\"modellidentifikation: \" + val);\n          await Preferences.set({\n            key: 'modellidentifikation',\n            value: val\n          });\n          this.modellInitialisieren();\n        }\n      } catch {\n        await Preferences.set({\n          key: 'modellidentifikation',\n          value: this.modellidentifikation\n        });\n      }\n    },\n    onVideoChange(e) {\n      const file = e.target.files[0];\n      console.log(String(file.duration));\n      this.video = file;\n    },\n    onComplete() {\n      var host = this.modelhost; //'http://' + window.location.hostname;\n\n      var content = {\n        Modellidentifikation: this.modellidentifikation,\n        AuswahlVerantwortliche: this.AuswahlVerantwortliche,\n        Abteilungen: this.AuswahlAbteilungen,\n        Grund: this.AuswahlGrund,\n        Text: this.freitext,\n        Montageplatz: this.montageplatz,\n        Baugruppe: this.baugruppe,\n        Auftrag: this.auftrag\n      };\n      if (this.imageData != null) {\n        content.Bild = this.imageData;\n      }\n\n      /*if (this.video != null)\n      {\n        content.Video = this.video;\n      }*/\n\n      this.loading = true;\n      document.getElementById(\"finishbtn\").disabled = true;\n      var vm = this;\n      axios({\n        method: 'post',\n        url: host + '/send',\n        data: content\n      }).then(function (response) {\n        if (response.status == 200) {\n          alert(\"Erfolgreich gemeldet!\");\n          vm.AuswahlAbteilungen = [];\n          vm.AuswahlGrund = [];\n          vm.AuswahlVerantwortliche = [];\n          window.location.reload(true);\n        } else {\n          alert(\"Melden fehlgeschlagen!\");\n        }\n      }).catch(error => {\n        alert(\"Melden fehlgeschlagen!\" + error);\n      }).finally(() => {\n        this.loading = false;\n        document.getElementById(\"finishbtn\").disabled = false;\n      });\n    },\n    setLoading: function (value) {\n      console.log(\"setLoading\");\n    },\n    tabChange: function (tab1, tab2) {\n      if (tab2 == 1) {\n        if (this.MoeglicheGruende.length == 1) {\n          var grund = this.MoeglicheGruende[0];\n          var r1 = this.$refs['gdk' + grund];\n          r1[0].handleClick();\n        }\n      }\n      if (tab2 == 3) {\n        if (this.MoeglicheVerantwortliche.length == 1) {\n          var verant = this.MoeglicheVerantwortliche[0];\n          var r2 = this.$refs['ver' + verant];\n          r2[0].handleClick();\n          //r[0].handleSelectChange(true);\n          //r[0].selected = true;\n          //this.AuswahlVerantwortliche = [this.MoeglicheVerantwortliche[0]];\n        }\n      }\n\n      console.log(\"tabChange\");\n    },\n    handleValidation: function (isValid, tabIndex) {\n      console.log('Tab: ' + tabIndex + ' valid: ' + isValid);\n    },\n    handleErrorMessage: function (errorMsg) {\n      this.errorMsg = errorMsg;\n      console.log(\"Error: \" + this.errorMsg);\n    },\n    changeAbteilung() {\n      console.log(Date.now() + \": changeAbteilung\");\n      this.BetroffeneAbteilungen = \"\";\n      this.AuswahlAbteilungen.forEach(element => {\n        this.BetroffeneAbteilungen = this.BetroffeneAbteilungen + \", \" + element;\n      });\n      if (this.BetroffeneAbteilungen != \"\") this.BetroffeneAbteilungen = this.BetroffeneAbteilungen.substring(2);\n      this.AuswahlGrund = [];\n      this.clearAuswahlGrund = !this.clearAuswahlGrund;\n      this.MoeglicheGruende.splice(0);\n      this.AuswahlAbteilungen.forEach(element => {\n        this.RepertoireGruende[element].forEach(element2 => {\n          this.MoeglicheGruende.splice(0, 0, element2);\n        });\n      });\n      this.changeGrund();\n    },\n    changeGrund() {\n      console.log(Date.now() + \": changeGrund\");\n      this.GewaehlteGruende = \"\";\n      this.AuswahlGrund.forEach(element => {\n        this.GewaehlteGruende = this.GewaehlteGruende + \", \" + element;\n      });\n      if (this.GewaehlteGruende != \"\") this.GewaehlteGruende = this.GewaehlteGruende.substring(2);\n      this.AuswahlVerantwortliche = [];\n      this.clearAuswahlVerantwortliche = !this.clearAuswahlVerantwortliche;\n      this.MoeglicheVerantwortliche.splice(0);\n      this.AuswahlAbteilungen.forEach(element => {\n        this.RepertoireVerantwortliche[element].forEach(element2 => {\n          this.MoeglicheVerantwortliche.splice(0, 0, element2);\n        });\n      });\n\n      /*if (this.MoeglicheVerantwortliche.length == 1)\n      {\n        var verant = this.MoeglicheVerantwortliche[0];\n        var r = this.$refs['ver' + verant];\n        //r.handleClick();\n        //r[0].handleSelectChange(true);\n        r[0].selected = true;\n        this.$forceUpdate();\n        this.AuswahlVerantwortliche = [this.MoeglicheVerantwortliche[0]];\n        console.log(this.AuswahlVerantwortliche);\n      }*/\n\n      this.changeVerantwortlicher();\n    },\n    changeVerantwortlicher() {\n      console.log(Date.now() + \": changeVerantwortlicher\");\n      this.GewaehlteVerantwortliche = \"\";\n      this.AuswahlVerantwortliche.forEach(element => {\n        this.GewaehlteVerantwortliche = this.GewaehlteVerantwortliche + \", \" + element;\n      });\n      if (this.GewaehlteVerantwortliche != \"\") this.GewaehlteVerantwortliche = this.GewaehlteVerantwortliche.substring(2);\n    },\n    validate() {\n      return new Promise((resolve, reject) => {\n        if (this.AuswahlAbteilungen.length) {\n          resolve(true);\n        } else {\n          alert(\"Mindestens eine Abteilung auswÃ¤hlen!\");\n          reject(false);\n        }\n      }).catch(error => {\n        console.log(\"validate error: \" + error);\n      });\n    },\n    validate2() {\n      return new Promise((resolve, reject) => {\n        if (this.AuswahlGrund.length) {\n          resolve(true);\n        } else {\n          alert(\"Grund auswÃ¤hlen!\");\n          reject(false);\n        }\n      }).catch(error => {\n        console.log(\"validate error2: \" + error);\n      });\n    },\n    validate3() {\n      console.log(\"validate3\");\n      return new Promise((resolve, reject) => {\n        if (this.AuswahlVerantwortliche.length) {\n          resolve(true);\n        } else {\n          alert(\"Verantwortliche auswÃ¤hlen!\");\n          reject(false);\n        }\n      }).catch(error => {\n        console.log(\"validate error3: \" + error);\n      });\n    },\n    validateAnlagen() {\n      console.log(\"validateAnlagen\");\n      return new Promise((resolve, reject) => {\n        if (this.displayScan) {\n          resolve(true);\n        } else {\n          reject(false);\n        }\n      }).catch(error => {\n        console.log(\"validateAnlagen error: \" + error);\n      });\n    },\n    oeffneVerantwortlicher: function (value) {\n      console.log(\"oeffneVerantwortlicher\");\n    }\n  }\n};","map":{"version":3,"mappings":"AAsWA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;EACAA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAf;MACAgB;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,wBACA,aACA;MACAC;QACA;MACA;MACAC;QACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAhD;QACAC;QACAC;QACAC;QACAgB;QACAE;QACAE;QACA0B;QACAlD;QACAmD;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;;EACA;IACAC;IACA;IACA;EACA;EACAC;IACAnD;MACA;QACA;UACA;QACA;UACA;YACA;UACA;QACA;MACA;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;EACA;;EACAoD;IACAF;IACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA;;EACAG;IACAC;MACAJ;MACA;MACA;MACA;MAEA,2BACA;QACA;MACA;QACA;MACA;IACA;IACAK;MACAL;MACA;MACA;MACA;MACA;IACA;IACAM;MACAN;MACA;MACA;MACA;MACA;MACA;MACA;;MAEAO,uBACAC;QACA1E;UACA2E;YAAAC;UAAA;UACAC;YAAAD;UAAA;QACA;QACAE;MACA,GACAC,qBACAC;IACA;IACA;IACAC;MACAf;MACA;MACAA;MACA;MACAA;MACA;MACAA;MACAgB;MACAhB;IACA;IACA;IACAiB;MACAjB;MACA;MACA;MACA;MACA;IACA;;IACA;IACAkB;MACAlB;MACA;QACAmB;MACA;IACA;IACA;IACAC;MACApB;MACA;QACAqB;QACA;MACA;;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;AACA;AACA;IACA;;IACAC;MACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;IAjBA,CAoBA;IACAC;MACAxB;MACAyB;IACA;IACA;MACAzB;MACA;MACA0B;MAEA;QACA;MACA;IACA;IACA;MACA1B;MACA;MACA;MACA2B;MAEA;;MAEA;MACAA;MAEA;QACA;MACA;IACA;IACA;MACA3B;MACA;MACA;MACA2B;MAEA;;MAEA;MACAA;MAEA;QACA;MACA;IACA;IACA;MACA3B;MACA;;MAEA;MACA2B;MAEA;IACA;IACAC;MACA5B;MACA;QACA6B;QACAC;QACAC;QACAC;MAEA;QACAA;MACA;MAEA;QAAAC;MAAA;IACA;IACAC;MACAlC;MACA;MACAmC;MAEA;MACAC;MACAA;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACAtC;MACA;IACA;IACAuC;MACAvC;MACA;MACA;MACA;MAEA;MACA;MACA;MACA;;MAEA;QACAwC;QACAC;QACAC;QAEA;UACA;UACA;UACAC;UACAA;YACA;YACA;YACA;UACA;;UACA;QACA;MACA;QACAH;QACAC;QACAC;MACA;IACA;IACAE;MACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACAC;MACA;QACA;MACA;MACA;QACA;QACA;;QAEA;QACA;;QAEA;QACApD;UACA;UACA;UACA;UACA;QACA;;QAEA;QACAA;MACA;IACA;IACAqD;MACA;MACA;MACA;MACA;MACA;MAEA;QACAC;QACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACAC;MACAA;MACAA;IACA;IACAC;MACA;MACA;IACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;MAEAC;QACAC;QACAC;QACArI;MACA;QACA;UACAsI;UACA;UACA;QACA;UACAA;QACA;MACA;QACAA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACAhE;MACA;MACA;MACA;MACA;MACA;MAEA;MAEA2D,uCACA9C;QACAb;QACAiE;QACAjE;MACA,GACAc;QACAd;MACA,GACAkE;;MAEA;IACA;;IACA,sCACA;MACAlE;MACAA;MACA;MACAA;MACA,oCACA;QACA;UAAAmE;QAAA;QACAnE;QACA;MACA;MACAA;MACA;IACA;IACA,uCACA;MACAA;MACA;MACA,qCACA;QACA;UACAmE;UACAC;QACA;MACA;IACA;IACA,uBACA;MACApE;MACA;QAAAqE;MAAA;MACA;;MAEA;MACA;MACA;MAEA;MACA;MACA;MAEA;MACA;IACA;IACAC;MACAtE;MACA;IACA;IACAuE;MACAvE;MAEA;MAEA,qCACA;QACAA;MACA;QACA2D,oEACA9C;UACAb;UACAiE;UACAA;UACAA;UACAA;UACAA;QACA;MACA;IACA;IACAO,uBACA;MACA;MACA;MAEA,sDACA;QACA,gEACA;UACAC;UACA;QACA;MACA;IACA;IACAC,wBACA;MACA;MAEAf,oEACA9C;QACAb;QACAiE;QACAA;QACAA;QACAA;QACAA;QAEAU;UACA;UAEA;UACA,0BACA;YACA,oBACA;cACAC;YACA;UACA;UAEA,uBACA;YACA;YACA;YACAC;cACA,2DACA;gBACAZ;gBACAA;cACA;YACA;UACA;UACA,uBACA;YACA;YACA;YACAa;cACA,2DACA;gBACAb;gBACAA;cACA;YACA;UACA;UACA,uBACA;YACA;YACA;YACAc;cACA,2DACA;gBACAd;gBACAA;cACA;YACA;UACA;QACA;MACA,GACAC;IACA;IACA,oCACA;MACAlE;MAEAA;MACA,0CACA;QACAA;QACA;UACAmE;UACAC;QACA;QACA;MACA;QACApE;MACA;MAEA;QACAmE;QACAC;MACA;MACA;MACA;QACA;QACA,sCACA;UACA;UACApE;UACA;YACAmE;YACAC;UACA;UACA;QACA;MACA;QACA;UACAD;UACAC;QACA;MACA;IAEA;IACAY;MACA;MACAhF;MACA;IACA;IACAiF;MACA;;MAEA;QACAC;QACA5H;QACA6H;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEA,4BACA;QACAC;MACA;;MAEA;AACA;AACA;AACA;;MAEA;MACAhE;MAEA;MAEAkC;QACAC;QACAC;QACArI;MACA;QACA;UACAsI;UAEAG;UACAA;UACAA;UAEAyB;QACA;UACA5B;QACA;MACA;QACAA;MACA;QACA;QACArC;MACA;IACA;IACAkE;MACA3F;IAEA;IACA4F,iCACA;MACA,eACA;QACA,uCACA;UACA;UACA;UACAC;QACA;MACA;MACA,eACA;QACA,+CACA;UACA;UACA;UACAC;UACA;UACA;UACA;QACA;MACA;;MACA9F;IACA;IACA+F;MACA/F;IACA;IACAgG;MACA;MACAhG;IACA;IACAiG,kBACA;MACAjG;MAEA;MACA;QACA;MACA;MACA;MAEA;MACA;MACA;MACA;QACA;UACA;QACA;MACA;MAEA;IACA;IACAkG;MACAlG;MAEA;MACA;QACA;MACA;MACA;MAEA;MACA;MACA;MACA;QACA;UACA;QACA;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEA;IACA;IACAmG;MACAnG;MAEA;MACA;QACA;MACA;MACA;IACA;IACAoG;MACA;QACA,oCACA;UACAC;QACA;UACAvC;UACAwC;QACA;MACA;QACAtG;MACA;IACA;IACAuG;MACA;QACA,8BACA;UACAF;QACA;UACAvC;UACAwC;QACA;MACA;QACAtG;MACA;IACA;IACAwG;MACAxG;MACA;QACA,wCACA;UACAqG;QACA;UACAvC;UACAwC;QACA;MACA;QACAtG;MACA;IACA;IACAyG;MACAzG;MACA;QACA,sBACA;UACAqG;QACA;UACAC;QACA;MACA;QACAtG;MACA;IACA;IACA0G,yCACA;MACA1G;IACA;EACA;AACA","names":["name","components","PulseLoader","Carousel","Slide","mixins","data","imageBase64","uri","loading","imageData","selectedImages","video","montageplatz","baugruppe","auftrag","freitext","selected","showModal","showModalV","showModalF","showModalB","showModalBScan","showModalA","showModalAScan","showModalEinst","showModalVVorschau","showModalBVorschau","showModalBEditor","showModalProblem","problemDescription","displayScan","AuswahlAbteilungen","BetroffeneAbteilungen","AuswahlGrund","GewaehlteGruende","AuswahlVerantwortliche","GewaehlteVerantwortliche","RepertoireAbteilungen","RepertoireGruende","RepertoireVerantwortliche","MoeglicheGruende","MoeglicheVerantwortliche","clearAuswahlAbteilungen","clearAuswahlGrund","clearAuswahlVerantwortliche","spinner","color","size","margin","radius","modelhost","tmp_modelhost","modellidentifikation","tmp_modellidentifikation","showModalLizenz","Modell","Modelle","pref","useDefaultUI","bildpfad","queryInput","photo","report","isRecording","isFinished","recorder","videoUrl","stream","canvas","ctx","img","isDrawing","editMode","colors","lightColors","darkColors","selectedColor","console","watch","mounted","methods","openVideo","initPlayer","resetVideo","navigator","getUserMedia","width","ideal","height","audio","then","catch","record","setTimeout","stop","endVideo","track","gotStream","mimeType","videoDataHandler","queriesAbfragen","textboxfokus","document","BarcodeScanner","body","dataURLtoFile","mime","bstr","n","u8arr","type","removeImage","bild","e","removeImages","removeVideo","onImageChange","addButton","editButton","remButton","reader","selectImage","initializeCanvas","getEventCoords","x","y","startDrawing","draw","stopDrawing","saveEdits","drawImageOnCanvas","saveImage","link","cancelEditing","reportProblem","description","axios","method","url","alert","cancelProblemReport","hostGeaendert","vm","finally","key","value","force","anderesmodell","modellInitialisieren","modellSelectedSetzen","modellSelect","modelleInitialisieren","Vue","ref_shortened","abt_array","gdk_array","ver_array","onVideoChange","onComplete","Modellidentifikation","Abteilungen","Grund","Text","Montageplatz","Baugruppe","Auftrag","content","window","setLoading","tabChange","r1","r2","handleValidation","handleErrorMessage","changeAbteilung","changeGrund","changeVerantwortlicher","validate","resolve","reject","validate2","validate3","validateAnlagen","oeffneVerantwortlicher"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <div>\n  <form-wizard @on-complete=\"onComplete\"\n               @on-loading=\"setLoading\"\n               @on-validate=\"handleValidation\"\n               @on-change=\"tabChange\"\n               @on-error=\"handleErrorMessage\" title=\"SAM-KI-Nachricht\" subtitle=\"Stand 20.4.22 (Beta v0.1.2)\" shape=\"tab\" color=\"#006da0\"\n               back-button-text=\"ZurÃ¼ck\"\n               next-button-text=\"Weiter\"\n               finish-button-text=\"Einreichen\">\n    <tab-content title=\"Auswahl der Abteilung\" :selected=\"true\" :before-change=\"validate\">\n      <div class=\"form-group\">\n        <div>\n          <drag-selector v-model=\"AuswahlAbteilungen\" @change=\"changeAbteilung\" class=\"drag-selector\" ref=\"dragAbteilungen\">\n            <drag-selector-item-c v-for=\"(item, index) in RepertoireAbteilungen\"\n                                :value=\"item\"\n                                :key=\"index\" class=\"drag-selector__item\" :clear=\"clearAuswahlAbteilungen\" :ref=\"'abt' + item\">\n                {{ item }}\n            </drag-selector-item-c>\n          </drag-selector>\n        </div>\n\n        <ModalComponent v-model=\"showModalEinst\" title=\"Einstellungen\" @before-close=\"einstellungenSpeichern\" @before-open=\"modellSelectedSetzen\">\n          Montageplatz: <input type=\"text\" id=\"inputBoxHost\" :placeholder='montageplatz' v-model='montageplatz'><br>\n          Host fÃ¼r Modelle: <input type=\"text\" id=\"inputBoxHost\" :placeholder='modelhost' v-model='modelhost'><br>\n          Informationsmodell:\n          <select v-model=\"selected\" id=\"modellSelect\">\n            <option v-for=\"Modellname in Modelle\" :key=\"Modellname\" :value=\"Modellname\">\n              {{Modellname}}\n            </option>\n          </select>\n          <!--<br><button type=\"button\" class=\"button\" @click=\"showModalEinst=false\" style=\"float: right;\">\n            SchlieÃen\n          </button-->\n        </ModalComponent>\n      </div>\n    </tab-content>\n    <tab-content title=\"Grund der Kommunikation\" :before-change=\"validate2\" ref=\"tabgdk\">\n      <div class=\"form-group\">\n        <!-- <drag-selector-s v-model=\"AuswahlGrund\" @change=\"changeGrund\" class=\"drag-selector\" id=\"selectorGrund\" :clear=\"clearAuswahlGrund\"> -->\n        <drag-selector v-model=\"AuswahlGrund\" @change=\"changeGrund\" class=\"drag-selector\" id=\"selectorGrund\">\n          <drag-selector-item-c v-for=\"(item, index) in MoeglicheGruende\"\n                              :value=\"item\"\n                              :key=\"index\" class=\"drag-selector__item\" :clear=\"clearAuswahlGrund\" :ref=\"'gdk' + item\">\n              {{ item }}\n          </drag-selector-item-c>\n        </drag-selector>\n      </div>\n    </tab-content>\n\n    <tab-content title=\"Anlagen\" :before-change=\"validateAnlagen\" ref=\"tabanlagen\">\n      <div>\n        <table class=\"center\">\n          <tr>\n            <div class=\"btn-group\" v-if=\"displayScan\">\n              <div style=\"background-color:lightblue; width: 150px; height: 100px; float:left;font-size:24px;text-align:center;vertical-align: middle;padding-top:35px\">Auftrag</div>\n              <div style=\"background-color:white; width: 200px; height: 100px; float:left;font-size:24px;text-align:center;vertical-align: middle;\">\n               <p> {{ auftrag }} </p>\n              </div>\n              <button id=\"auftrag_scan\" @click=\"scanAuftrag\"><span>&#128269;</span></button>\n              <button id=\"auftrag_edit\" @click=\"showModalA=true\" style=\"color:black;\"><span>&#9998;</span></button>\n              <button id=\"auftrag_rem\" @click=\"auftrag='';\">\n                <span v-if=\"auftrag==''\" style=\"color:grey;\">&#215;</span>\n                <span v-if=\"auftrag!=''\" style=\"color:red;\">&#215;</span>\n              </button>\n            </div>\n          </tr>\n          <ModalComponent v-model=\"showModalA\" title=\"Auftrag\" @after-open=\"textboxfokus('Auftrag')\">\n            <input id=\"Auftrag\" type=\"text\" class=\"form-control\" v-model=\"auftrag\" />\n          </ModalComponent>\n          <div class=\"container\" v-if=\"!displayScan\">\n            <div class=\"barcode-scanner--area--container\">\n              <div class=\"relative\" style=\"justify-content:center;display:flex;font-size:18px\">\n                <p>Auf Code ausrichten.</p><br>\n              </div>\n              <div class=\"relative\" style=\"justify-content:center;display:flex;font-size:24px\">\n                <button id=\"auftrag_scan_ende\" @click=\"scanEnde\" style=\"width:200px;height:50px;\"><span style=\"color:red;font-size:24px\">Abbrechen</span></button>\n              </div>\n              <!-- div class=\"square\">\n                <div class=\"barcode-scanner--area--outer\">\n                  <div class=\"barcode-scanner--area--inner\"></div>\n                </div>\n              </!-->\n            </div>\n          </div>\n          \n\n          <tr>\n            <div class=\"btn-group\" v-if=\"displayScan\">\n              <div style=\"background-color:lightblue; width: 150px; height: 100px; float:left;font-size:24px;text-align:center;vertical-align: middle;padding-top:35px\">Baugruppe</div>\n              <div style=\"background-color:white; width: 200px; height: 100px; float:left;font-size:24px;text-align:center;vertical-align: middle;\">\n               <p> {{ baugruppe }} </p>\n              </div>\n              <button id=\"bgruppe_scan\" @click=\"scanBaugruppe\"><span>&#128269;</span></button>\n              <button id=\"bgruppe_edit\" @click=\"showModalB=true\" style=\"color:black;\"><span>&#9998;</span></button>\n              <button id=\"bgruppe_rem\" @click=\"baugruppe='';\">\n                <span v-if=\"baugruppe==''\" style=\"color:grey;\">&#215;</span>\n                <span v-if=\"baugruppe!=''\" style=\"color:red;\">&#215;</span>\n              </button>\n            </div>\n          </tr>\n          <ModalComponent v-model=\"showModalB\" title=\"Baugruppe\" @after-open=\"textboxfokus('Baugruppe')\">\n            <input id=\"Baugruppe\" type=\"text\" class=\"form-control\" v-model=\"baugruppe\" />\n          </ModalComponent>\n\n       <!-- FOTO -->\n        <tr>\n        <div class=\"btn-group\" v-if=\"displayScan\">\n          <div style=\"background-color:lightblue; width: 150px; height: 100px; float:left;font-size:24px;text-align:center;vertical-align: middle;padding-top:35px;\">Foto</div>\n          <input id=\"bild\" type=\"file\" accept=\"image/*\" capture=\"camera\" multiple style=\"display:none;\" @change=\"onImageChange\" />\n          <button id=\"bild_vorschau\" @click=\"showModalBVorschau=true\" style=\"font-size:24px;width:200px\">\n            <span v-if=\"!imageData\" style=\"color:lightgrey;\">Vorschau</span>\n            <img v-if=\"imageData\" :src=\"imageData[0]\" style=\"max-width:100%;max-height:100%;\">\n          </button>\n          <button id=\"bild_add\" onclick=\"document.getElementById('bild').click();\" style=\"color:green;\"><span>&#128247;</span></button>\n          <!-- button id=\"bild_edit\" :disabled=\"!imageData\" @click=\"showModalBEditor=true\" style=\"color:grey;\"><span>&#9998;</span></button-->\n          <!-- Variante fÃ¼r 1 Bild: -->\n          <!-- <button id=\"bild_edit\" :disabled=\"!imageData\" @click=\"showModalBEditor=true\" style=\"color:grey;\"><span>&#9998;</span></button> -->\n          <button id=\"bild_edit\" :disabled=\"selectedImages.length !== 1\" @click=\"openEditor(selectedImages[0])\" style=\"color:grey;\"><span>&#9998;</span></button>\n          <!-- Variante fÃ¼r 1 Bild: -->\n          <!-- <button id=\"bild_rem\" :disabled=\"!imageData\" @click=\"removeImage\" style=\"color:grey;\"><span>&#215;</span></button> -->\n          <button id=\"bild_rem\" :disabled=\"selectedImages.length === 0\" @click=\"removeImages\" style=\"color:grey;\"><span>&#215;</span></button>\n        </div>\n        </tr>\n        <!-- Variante fÃ¼r 1 Bild -->\n        <!-- <ModalComponent v-model=\"showModalBVorschau\" title=\"Foto\" modal-class=\"modal-gross\">\n          <img style=\"max-width:100%;max-height:100%;\" :src=\"imageData\" />\n        </ModalComponent> -->\n        <ModalComponent v-model=\"showModalBVorschau\" title=\"Foto\" modal-class=\"modal-gross\">\n          <div style=\"display: flex; flex-wrap: wrap;\">\n            <div v-for=\"(image, index) in imageData\" :key=\"index\" style=\"width: 33.33%;\">\n              <img :class=\"{ 'selected': selectedImages.includes(index) }\" style=\"max-width:100%;max-height:100%;\" :src=\"image\" @click=\"selectImage(index)\" />\n            </div>\n          </div>\n        </ModalComponent>\n\n        <ModalComponent v-model=\"showModalBEditor\" title=\"Freies Markieren\" modal-class=\"modal-gross\" @after-open=\"initializeCanvas\">\n          <div ref=\"editorContainer\">\n            <button @click=\"cancelEditing\" style=\"border-radius: 5px;background-color: #006da0;border: none;color: white;padding: 8px 16px;text-align: center;text-decoration: none;display: inline-block;font-size: 14px;margin-bottom: 20px;\">Unmarkiert Ã¼bernehmen</button>\n            <button @click=\"saveEdits\" style=\"border-radius: 5px;background-color: #006da0;border: none;color: white;padding: 8px 16px;text-align: center;text-decoration: none;display: inline-block;font-size: 14px;margin-bottom: 20px;float: right;\">Markiert Ã¼bernehmen</button>\n            <br>\n            <div class=\"color-selector\" style=\"display:flex;justify-content: center;align-items: center;\">\n              <span style=\"margin-right:5px\">Farbwahl:</span>\n              <button\n                v-for=\"color in colors\"\n                :key=\"color\"\n                :style=\"{ backgroundColor: color }\"\n                :class=\"{ \n                  selected: color === selectedColor, \n                  dark: darkColors.includes(color) && color === selectedColor,\n                  light: lightColors.includes(color) && color === selectedColor\n                }\"\n                @click=\"selectedColor = color\"\n              ></button>\n            </div>\n            \n            <canvas ref=\"canvas\" \n              @mousedown=\"startDrawing\"\n              @mousemove=\"draw\"\n              @mouseup=\"stopDrawing\"\n              @mouseleave=\"stopDrawing\"\n              @touchstart.prevent=\"startDrawing\"\n              @touchmove.prevent=\"draw\"\n              @touchend.prevent=\"stopDrawing\"\n              @touchcancel.prevent=\"stopDrawing\"\n              style=\"float: left; border: none; max-width:100%;max-height:100%;\"></canvas>\n          </div>\n          \n          <!-- <Carousel v-bind=\"settings\" :breakpoints=\"breakpoints\">\n            <Slide v-for=\"(image, index) in imageData\" :key=\"index\">\n              <div class=\"carousel__item\">\n                <img :src=\"image\" @click=\"selectImage(index)\" />\n              </div>\n            </Slide>\n          </Carousel> -->\n          <Carousel>\n            <Slide v-for=\"(image, index) in imageData\" :key=\"index\">\n              <img :src=\"image\" @click=\"selectImage(index)\" />\n            </Slide>\n          </Carousel>\n\n\n        </ModalComponent>\n\n\n        <!-- VIDEO -->\n        <!--tr>\n        <div class=\"btn-group\" v-if=\"displayScan\">\n          <div style=\"background-color:lightblue; width: 150px; height: 100px; float:left;font-size:24px;text-align:center;vertical-align: middle;padding-top:35px\">Video</div>\n          <button id=\"video_vorschau\" :disabled=\"!videoUrl\" @click=\"showModalVVorschau=true\" style=\"font-size:24px;width:200px\">\n            <span v-if=\"videoUrl\" style=\"color:black;\">Vorschau</span> \n            <span v-if=\"!videoUrl\" style=\"color:lightgrey;\">Vorschau</span>\n          </button>\n          <button id=\"video_add\" @click=\"showModalVVorschau=true\"><span>&#128247;</span></button>\n          <button id=\"video_leer\" disabled=true></button>\n          <button id=\"video_rem\" :disabled=\"!videoUrl\" @click=\"removeVideo\">\n            <span v-if=\"videoUrl\" style=\"color:red;\">&#215;</span> \n            <span v-if=\"!videoUrl\" style=\"color:grey;\">&#215;</span>\n          </button>\n        </div>\n        </!--tr>\n        <ModalComponent v-model=\"showModalVVorschau\" title=\"Video\" @before-open=\"openVideo\" @before-close=\"endVideo\" modal-class=\"modal-flex\">\n          <div style=\"text-align: center;\">\n            <video ref=\"videoRec\" width=\"640\" height=\"auto\" autoplay muted playsinline controls data-wf-ignore=\"true\" data-object-fit=\"cover\" />\n            <br>\n\n            <button class=\"button btn-video\" v-if=\"!isRecording && !isFinished\" @click=\"record\">\n              <span style=\"color:red;\">â¬¤</span>\n            </button>\n            <button class=\"button btn-video\" v-if=\"isRecording && !isFinished\" @click=\"stop\">\n              <span>â¼</span>\n            </button>\n            <button class=\"button btn-video\" @click=\"resetVideo\" v-if=\"isFinished\">\n              <span style=\"color:red;\">&#10006;</span>\n            </button>\n          </div>\n        </ModalComponent -->\n\n        <tr>\n          <div class=\"btn-group\" v-if=\"displayScan\">\n            <div style=\"background-color:lightblue; width: 150px; height: 100px; float:left;font-size:24px;text-align:center;vertical-align: middle;padding-top:35px\">Freitext</div>\n            <button id=\"freitext_vorschau\" @click=\"showModalF=true\" style=\"font-size:24px;width:200px\">\n              <span v-if=\"freitext\" style=\"color:black;font-size:8px;white-space: pre-wrap;line-height:1\">{{freitext}}</span> \n              <span v-if=\"!freitext\" style=\"color:lightgrey;\">Vorschau</span> \n            </button>\n            <button id=\"text_leer\" disabled></button>\n            <button id=\"text_add\" @click=\"showModalF=true\" style=\"color:black;\"><span>&#9998;</span></button>            \n            <button id=\"text_rem\" @click=\"freitext='';\">\n              <span v-if=\"freitext==''\" style=\"color:grey;\">&#215;</span>\n              <span v-if=\"freitext!=''\" style=\"color:red;\">&#215;</span>\n            </button>\n          </div>\n        </tr>\n        <ModalComponent v-model=\"showModalF\" title=\"Freitext\" @after-open=\"textboxfokus('freitextbox')\">\n          <textarea class=\"form-control\"\n            placeholder=\"Freitext\"\n            v-model=\"freitext\"\n            style=\"height:80px; width:400px;\"\n            id=\"freitextbox\"\n          ></textarea>\n        </ModalComponent>\n        </table>\n      </div>\n    </tab-content>\n\n    <tab-content title=\"Auswahl Verantwortlicher\" :before-change=\"validate3\">\n      <div class=\"form-group\">\n        <div>\n          <drag-selector v-model=\"AuswahlVerantwortliche\" @change=\"changeVerantwortlicher\" class=\"drag-selector\">\n              <drag-selector-item-c v-for=\"(item, index) in MoeglicheVerantwortliche\"\n                                  :value=\"item\"\n                                  :key=\"index\" class=\"drag-selector__item\" :clear=\"clearAuswahlVerantwortliche\" :ref=\"'ver' + item\">\n                  {{ item }}\n              </drag-selector-item-c>\n          </drag-selector>\n        </div>\n      </div>\n    </tab-content>\n\n    <tab-content title=\"Zusammenfassung\">\n      <div class=\"form-group\">\n        <table>\n          <tr>\n            <td>Betroffene Abteilungen:</td>\n            <td>{{BetroffeneAbteilungen}}</td>\n          </tr>\n          <tr>\n            <td>GewÃ¤hlte GrÃ¼nde:</td>\n            <td>{{GewaehlteGruende}}</td>\n          </tr>\n          <tr>\n            <td>GewÃ¤hlte Verantwortliche:</td>\n            <td>{{GewaehlteVerantwortliche}}</td>\n          </tr>\n          <tr>\n            <td>Montageplatz:</td>\n            <td>{{ montageplatz }}</td>\n          </tr>\n          <tr>\n            <td>Baugruppe:</td>\n            <td>{{ baugruppe }}</td>\n          </tr>\n          <tr>\n            <td>Auftrag:</td>\n            <td>{{ auftrag }}</td>\n          </tr>\n        </table>\n\n        <!-- Zeigt Freitext an, falls vorhanden -->\n        <div v-if=\"freitext\">\n          <p>Freitext: {{ freitext }}</p>\n        </div>\n\n        <!-- Zeigt Bilder in der Uebersicht an -->\n        <div v-if=\"imageData\">\n          <img :src=\"imageData\" style=\"max-width:30%\">\n        </div>\n\n        <!-- Zeigt Video an, ob Video hochgeladen wurde -->\n        <!-- div v-if=\"videoUrl\">\n          <video ref=\"videoPlayer\" :src=\"videoUrl\" width=\"640\" height=\"480\" autoplay loop muted playsinline />\n        </!-->\n      </div>\n    </tab-content>\n\n    <button id=\"finishbtn\" class=\"wizard-btn\" style=\"background-color: rgb(35, 204, 239); border-color: rgb(35, 204, 239); color: white;box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3)\" slot=\"finish\">\n      Melden\n      <pulse-loader :loading=\"loading\" :color=\"spinner.color\" :size=\"spinner.size\"></pulse-loader>\n    </button>\n    \n  </form-wizard>\n\n    <div style=\"text-align:center\" v-if=\"displayScan\">\n      <button type=\"button\" class=\"button\" @click=\"showModalEinst=true\" style=\"background-color: transparent;\">\n        <img src=\"./assets/feld_einstellungen3.png\" style=\"height:50px;width:50px;border-radius:50%;box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3)\">\n      </button>\n      <button type=\"button\" class=\"button\" @click=\"showModalLizenz=true\" style=\"background-color: transparent;\">\n        <img src=\"./assets/feld_info.png\" style=\"height:50px;width:50px;border-radius:50%;box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3)\">\n      </button>\n       <button type=\"button\" class=\"button\" @click=\"showModalProblem=true\" style=\"background-color: transparent;\">\n        <img src=\"./assets/feld_idee.png\" style=\"height:50px;width:50px;border-radius:50%;box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3)\">\n      </button>\n    </div>\n\n    <ModalComponent v-model=\"showModalLizenz\" title=\"Informationen und Lizenzen\">\n      Implementierung im FÃ¶rderprojekt SAM-KI<br>\n      (c) 2023 Fraunhofer Institut fÃ¼r Produktionstechnik<br>und Automatisierung (FhG IPA)<br>\n      <textarea class=\"textbox\" name=\"note\">\n        Vue.js\n\n        VueDragSelector\n\n        VueModal\n\n        SendIntent\n\n        Capacitor\n\n        VueFormWizard\n        https://github.com/BinarCode/vue-form-wizard\n        MIT License\n        Copyright (c) 2017 Cristi Jora\n        Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n        The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n        THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n      </textarea>\n    </ModalComponent>\n     <ModalComponent v-model=\"showModalProblem\" title=\"Problem oder Feedback melden\" modal-class=\"modal-problem\" v-on:click.self=\"cancelProblemReport\">\n      <div>\n        <label for=\"problemDescription\" style=\"display: block; margin-bottom: 10px;\">Beschreibung:</label>\n        <textarea id=\"problemDescription\" v-model=\"problemDescription\" style=\"display: block; resize: none; width: 98%; height: 200px; margin-bottom: 20px;\"></textarea>\n      </div>\n      <button @click.stop=\"cancelProblemReport\" class=\"button\">Abbrechen</button>\n      <button @click.stop=\"reportProblem\" class=\"button\" style=\"float: right;\">Problem melden</button>\n    </ModalComponent>\n  </div>\n</template>\n<script>\n//import { json } from 'express/lib/response';\n\nimport axios from 'axios';\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue'\nimport Vue from \"vue\";\nimport { Preferences } from '@capacitor/preferences';\nimport { BarcodeScanner } from '@capacitor-community/barcode-scanner';\nimport { Filesystem } from '@capacitor/filesystem';\n// import 'vue-carousel/dist/carousel.css';\nimport { Carousel, Slide } from 'vue-carousel';\n\n\nexport default {\n  name: \"App\",\n  components: {\n    PulseLoader,\n    Carousel,\n    Slide\n  },\n  mixins: [],\n  data() {\n    return {\n      imageBase64: '',\n      uri: '',\n      loading: false,\n      imageData: [],\n      selectedImages: [],\n      video: null,\n      montageplatz: '',\n      baugruppe: '',\n      auftrag: '',\n      name: '',\n      freitext: \"\",\n      selected: [],\n      showModal: false,\n      showModalV: false,\n      showModalF: false,\n      showModalB: false,\n      showModalBScan: false,\n      showModalA: false,\n      showModalAScan: false,\n      showModalEinst: false,\n      showModalVVorschau: false,\n      showModalBVorschau: false,\n      showModalBEditor: false,\n      showModalProblem: false,\n      problemDescription: '',\n      displayScan: true,\n      AuswahlAbteilungen: [],\n      BetroffeneAbteilungen: '',\n      AuswahlGrund: [],\n      GewaehlteGruende: '',\n      AuswahlVerantwortliche: [],\n      GewaehlteVerantwortliche: '',\n      RepertoireAbteilungen: [\n        'Elektronik'\n      ],\n      RepertoireGruende: {\n        'Elektronik': ['Fehler Ladeelektronik', 'Fehler Modbus']\n      },\n      RepertoireVerantwortliche: {\n        'Elektronik': ['Test Person']\n      },\n      MoeglicheGruende: [],\n      MoeglicheVerantwortliche: [],\n      clearAuswahlAbteilungen: false,\n      clearAuswahlGrund: false,\n      clearAuswahlVerantwortliche: false,\n      spinner: {\n        color: 'white',\n        size: '30px',\n        margin: '2px',\n        radius: '100%'\n      },\n      modelhost: '',\n      tmp_modelhost: '',\n      modellidentifikation: '',\n      tmp_modellidentifikation: '',\n      showModalLizenz: false,\n      Modell: {},\n      Modelle: [],\n      pref: {},\n      useDefaultUI: true,\n      bildpfad: \"\",\n      queryInput: {\n        montageplatz: '',\n        baugruppe: '',\n        auftrag: '',\n        freitext: '',\n        AuswahlAbteilungen: [],\n        AuswahlGrund: [],\n        AuswahlVerantwortliche: [],\n        photo: '',\n        video: '',\n        report: ''\n      },\n      isRecording: false, // recording mode identifier\n      isFinished: false, // finished recording - action buttons indicator\n      recorder: null, // component wide MediaRecorder\n      videoUrl: null, // link to video - assigned when done writing video file\n      stream: null,\n      // Canvas\n      canvas: null,\n      ctx: null,\n      img: new Image(),\n      isDrawing: false,\n      editMode: false,\n      colors: ['red', 'yellow', 'green', 'blue', 'white', 'black'],\n      lightColors: ['red', 'yellow', 'white'],\n      darkColors: ['green', 'blue', 'black'],\n      selectedColor: 'red', // Default selected color\n      // Canvas Ende\n      // Carousel\n      //  settings: {\n      //     itemsToShow: 1,\n      //     snapAlign: 'center',\n      //   },\n      //   breakpoints: {\n      //     700: {\n      //       itemsToShow: 3.5,\n      //       snapAlign: 'center',\n      //     },\n      //     1024: {\n      //       itemsToShow: 5,\n      //       snapAlign: 'start',\n      //     },\n      //   },\n      // Carousel Ende\n    };\n  },\n  async beforeMount(){\n    console.log(\"Funktion beforeMount\");\n    this.initialisieren();\n    this.queriesAbfragen();\n  },\n  watch: {\n    showModalBEditor(newValue) {\n      if (newValue) {\n        if (this.$refs.canvas) {\n          this.initializeCanvas();\n        } else {\n          this.$nextTick(() => {\n            this.initializeCanvas();\n          });\n        }\n      } else {\n        this.stopDrawing();\n      }\n    },\n    // Variante fÃ¼r 1 Bild\n    // imageData(newImageData, oldImageData) {\n    //   if (newImageData !== oldImageData && newImageData != null) {\n    //     this.showModalBEditor = true;\n    //   }\n    // },\n\n    // imageData(newImageData, oldImageData) {\n    //   if (newImageData !== oldImageData && newImageData.length > 0) {\n    //     this.selectedImages.push(newImageData);\n    //     this.showModalBEditor = true;\n    //   }\n    // },\n  },\n  mounted() {\n    console.log(\"Funktion mounted\");\n    /*const items = this.$capacitor.getIntent().getAction().getItems();\n    for (let i = 0; i < items.length; i++)\n    {\n      const item = items[i];\n      const uri = item.getUri();\n      const mimeType = item.getType();\n    }*/\n  },\n  methods: {\n    openVideo() {\n      console.log(\"Funktion openVideo\");\n      this.$refs.videoRec.setAttribute('autoplay', '');\n      this.$refs.videoRec.setAttribute('muted', '');\n      this.$refs.videoRec.setAttribute('playsinline', '');\n\n      if (this.videoUrl != null)\n      {\n        this.initPlayer();\n      } else {\n        this.resetVideo();\n      }\n    },\n    initPlayer() {\n      console.log(\"Funktion initPlayer\");\n      //this.$refs.videoRec.autoplay = true;\n      this.$refs.videoRec.controls = true;\n      this.$refs.videoRec.src = this.videoUrl;\n      this.$refs.videoRec.srcObject = null;\n    },\n    resetVideo() {\n      console.log(\"Funktion resetVideo\");\n      this.isFinished = false;\n      this.isRecording = false;\n      this.isLoading = true;\n      this.videoUrl = null;\n      //this.$refs.videoRec.controls = false;\n      //this.$refs.videoRec.autoplay = true;\n\n      navigator.mediaDevices\n        .getUserMedia({\n          video: {\n            width: { ideal: 1280 },\n            height: { ideal: 720 }\n          },\n          audio: false\n        })\n        .then(this.gotStream)\n        .catch(() => (this.isValid = false));\n    },\n    // start recoording\n    record() {\n      console.log(\"Funktion record\");\n      this.recorder.start();\n      console.log(\"Funktion start\");\n      this.isRecording = true;\n      console.log(\"Funktion isRecording\");\n      this.$refs.videoRec.controls = false;\n      console.log(\"Funktion controls\");\n      setTimeout(this.stop, 6000);\n      console.log(\"Funktion setTimeout\");\n    },\n    // stop recording\n    stop() {\n      console.log(\"Funktion stop\");\n      this.recorder.stop()\n      this.isRecording = false;\n      this.isFinished = true;\n      //this.$refs.videoRec.load();\n    },\n    // reset video diaply and emit video file url\n    endVideo() {\n      console.log(\"Funktion endVideo\");\n      this.stream.getTracks().forEach(function(track) {\n        track.stop();\n      });\n    },\n    // initialize MediaRecorder and video element source\n    gotStream(mediaStream) {\n      console.log(\"Funktion gotStream\");\n      this.recorder = new MediaRecorder(mediaStream, {\n        mimeType: \"video/mp4\", //video/webm unter nicht-ios!!\n        //audioBitsPerSecond: 128000\n      });\n      this.recorder.prepare();\n      if (mediaStream == null) console.log(\"mediastream ist null\");\n      if (this.recorder == null) console.log(\"recorder ist null\");\n      this.recorder.ondataavailable = this.videoDataHandler;\n      this.$refs.videoRec.src = null;\n      this.$refs.videoRec.srcObject = mediaStream;\n      this.stream = mediaStream;\n    },\n    // handle sending data for writing using the given WebSocket\n    videoDataHandler(event) {\n      this.$refs.videoRec.src = null;\n      this.videoUrl = window.URL.createObjectURL(event.data);\n      this.$refs.videoRec.src = this.videoUrl;\n      this.$refs.videoRec.srcObject = null;\n      this.initPlayer();\n      /*this.$refs.videoPlayer.src = this.videoUrl;\n      this.$refs.videoPlayer.srcObject = null;\n      this.$refs.videoPlayer.load();*/\n    },\n    queriesAbfragen() {\n      /*console.log(\"Funktion queriesAbfragen\");\n      var queries = this.$route.query;\n      var keys = Object.keys(queries);\n\n      if (keys.length > 0)\n      {\n        if (keys.includes('montageplatz')) this.montageplatz = queries['montageplatz'];\n        if (keys.includes('baugruppe')) this.montageplatz = queries['baugruppe'];\n        if (keys.includes('auftrag')) this.montageplatz = queries['auftrag'];\n        if (keys.includes('freitext')) this.montageplatz = queries['freitext'];\n        if (keys.includes('photo')) {\n          const readFilePath = async () => {\n            const contents = await Filesystem.readFile({\n              path: queries['photo']\n            });\n\n            console.log('data:', contents);\n          };\n        }\n      }*/\n    },\n    textboxfokus (id) {\n      console.log(\"textboxfokus \" + id);\n      document.getElementById(id).focus();\n    },\n    async afterOpenScan () {\n      console.log(\"Funktion afterOpenScan\");\n      const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\n      BarcodeScanner.showBackground();\n\n      if (result.hasContent) {\n        this.auftrag = result.content;\n      }\n    },\n    async scanAuftrag () {\n      console.log(\"Funktion scanAuftrag\");\n      this.displayScan = false;\n      var body = document.getElementsByTagName('body')[0];\n      body.style.backgroundImage = 'none';\n\n      const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\n\n      this.displayScan = true;\n      body.style.backgroundImage = 'url(Logo_kombiniert.png)';\n\n      if (result.hasContent) {\n        this.auftrag = result.content;\n      }\n    },\n    async scanBaugruppe () {\n      console.log(\"Funktion scanBaugruppe\");\n      this.displayScan = false;\n      var body = document.getElementsByTagName('body')[0];\n      body.style.backgroundImage = 'none';\n\n      const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\n\n      this.displayScan = true;\n      body.style.backgroundImage = 'url(Logo_kombiniert.png)';\n\n      if (result.hasContent) {\n        this.baugruppe = result.content;\n      }\n    },\n    async scanEnde () {\n      console.log(\"Funktion scanEnde\");\n      await BarcodeScanner.stopScan(); // start scanning and wait for a result\n\n      var body = document.getElementsByTagName('body')[0];\n      body.style.backgroundImage = 'url(Logo_kombiniert.png)';\n\n      this.displayScan = true;\n    },\n    dataURLtoFile: function (dataurl, filename) {\n      console.log(\"Funktion dataURLtoFile\");\n      var arr = dataurl.split(','), \n          mime = arr[0].match(/:(.*?);/)[1],\n          bstr = atob(arr[1]), \n          n = bstr.length, \n          u8arr = new Uint8Array(n);\n\n      while(n--){\n          u8arr[n] = bstr.charCodeAt(n);\n      }\n\n      return new File([u8arr], filename, {type:mime});\n    },\n    removeImage () {\n      console.log(\"Funktion removeImage\");\n      var bild = document.getElementById('bild');\n      bild.value = \"\";\n\n      var e = {};\n      e.target = {};\n      e.target.files = null;\n      this.onImageChange(e);\n    },\n    removeImages() {\n      // in absteigender Reihenfolge sortieren, um die Indizes beim Splicing nicht durcheinander zu bringen\n      this.selectedImages.sort((a, b) => b - a);\n      this.selectedImages.forEach(index => {\n        this.imageData.splice(index, 1);\n      });\n      this.selectedImages = [];\n    },\n    removeVideo() {\n      console.log(\"Funktion removeVideo\");\n      this.video = null;\n    },\n    onImageChange(e) {\n      console.log(\"Funktion onImageChange\");\n      var addButton = document.getElementById('bild_add');\n      var editButton = document.getElementById('bild_edit');\n      var remButton = document.getElementById('bild_rem');\n\n      const files = e.target.files;\n      // Auskommentiert ist immer die Variante fÃ¼r 1 Bild\n      // this.imageData = null;\n      this.imageData = [];  // imageData zurÃ¼cksetzen\n\n      if (files) {\n        addButton.style.color=\"grey\";\n        editButton.style.color=\"black\";\n        remButton.style.color=\"red\";\n\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => {\n            // this.imageData = reader.result;\n            this.imageData.push(reader.result);\n            // this.img.src = this.imageData;\n          };\n          this.bildpfad = file;\n        }\n      } else {\n        addButton.style.color=\"green\";\n        editButton.style.color=\"grey\";\n        remButton.style.color=\"grey\";\n      }\n    },\n    selectImage(index) {\n      const selectedIndex = this.selectedImages.indexOf(index);\n      // Toggle Funktion zum Aus-/AbwÃ¤hlen von Bildern\n      if (selectedIndex === -1) {\n        // Bild ist noch nicht ausgewÃ¤hlt, also auswÃ¤hlen\n        this.selectedImages.push(index);\n      } else {\n        // Bild ist bereits ausgewÃ¤hlt, also abwÃ¤hlen\n        this.selectedImages.splice(selectedIndex, 1);\n      }\n    },\n    // openEditor(index) {\n    //   if (this.showModalBEditor) {\n    //     // Ãnderungen speichern\n    //     this.saveEdits();\n    //   }\n    //   // Editor mit ausgewÃ¤hlten Bild Ã¶ffnen\n    //   this.img.src = this.imageData[index];\n    //   this.showModalBEditor = true;\n    // },\n    \n    // Canvas\n    initializeCanvas() {\n      if (!this.imageData) {\n        return;\n      }\n      this.$nextTick(() => {\n        this.canvas = this.$refs.canvas;\n        this.ctx = this.canvas.getContext(\"2d\");\n\n        // Create a new image object\n        let img = new Image();\n\n        // When the image has loaded, draw it on the canvas\n        img.onload = () => {\n          this.canvas.width = img.width;\n          this.canvas.height = img.height;\n          this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n          this.editMode = true;\n        };\n\n        // Start loading the image\n        img.src = this.imageData;\n      });\n    },\n    getEventCoords(e) {\n      const event = e.type.startsWith('touch') ? e.touches[0] : e;\n      const rect = this.canvas.getBoundingClientRect();\n      // Calculate the scale factor\n      const scaleX = this.canvas.width / rect.width;\n      const scaleY = this.canvas.height / rect.height;\n\n      return {\n        x: (event.clientX - rect.left) * scaleX,\n        y: (event.clientY - rect.top) * scaleY,\n      };\n    },\n    startDrawing(e) {\n      if (!this.editMode) return;\n      this.isDrawing = true;\n      this.ctx.strokeStyle = this.selectedColor;\n      this.ctx.beginPath();\n      const coords = this.getEventCoords(e);\n      this.ctx.moveTo(coords.x, coords.y);\n    },\n    draw(e) {\n      if (!this.isDrawing) return;\n      const coords = this.getEventCoords(e);\n      this.ctx.lineWidth = 8;\n      this.ctx.lineTo(coords.x, coords.y);      \n      this.ctx.stroke();\n    },\n    stopDrawing() {\n      this.isDrawing = false;\n    },\n    saveEdits() {\n      this.imageData = this.canvas.toDataURL(\"image/jpeg\", 0.7);\n      this.$nextTick(() => {\n        this.showModalBEditor = false;\n      });\n      this.editMode = false;\n    },\n    drawImageOnCanvas() {\n      const img = this.$refs.imageInModal;\n      this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n    },\n    saveImage() {\n      const link = document.createElement(\"a\");\n      link.href = this.canvas.toDataURL(\"image/jpeg\", 0.7);\n      link.download = \"edited-image.jpeg\";\n      link.click();\n    },\n    cancelEditing() {\n      this.showModalBEditor = false;\n      this.editMode = false;\n    },\n    // Canvas Ende\n    // Problemmeldung\n    reportProblem() {\n      //var host = this.modelhost;//'http://' + window.location.hostname;\n      var host = 'http://127.0.0.1:4000'; // Host auf Port 4000 geÃ¤ndert, da sonst CORS Fehler\n      let content = {\n        description: this.problemDescription\n      };\n\n      axios({\n        method: 'post',\n        url: host + '/feedback',\n        data: content\n      }).then((response) => {\n          if (response.status == 200) {\n              alert(\"Erfolgreich gemeldet!\");\n              this.showModalProblem = false;\n              this.problemDescription = '';\n          } else {\n              alert(\"Melden fehlgeschlagen!\");\n          }\n      }).catch((error) => {\n          alert(\"Melden fehlgeschlagen! \" + error);\n      });\n    },\n    cancelProblemReport() {\n      this.showModalProblem = false;\n      this.problemDescription = '';\n    },\n    // Problemmeldung Ende\n    hostGeaendert() {\n      console.log(\"Funktion hostGeaendert\");\n      this.AuswahlAbteilungen = [];\n      this.AuswahlGrund = [];\n      this.AuswahlVerantwortliche = [];\n      this.clearAuswahlAbteilungen = !this.clearAuswahlAbteilungen;\n      this.changeAbteilung();\n\n      var vm = this;\n\n      axios.get(this.modelhost +'/Modelle')\n      .then(function (response){\n        console.log(\"axios.get Modelle\");\n        vm.Modelle = response.data;\n        console.log(vm.Modelle);\n      })\n      .catch(function (error) {\n        console.log(\"axios.get Fehler: \" + error.message);\n      })\n      .finally(function(){ });\n\n      //wenn aktuelle modellidentifikation nicht enthalten ist, muss die liste und die auswahl ebenfalls aktualisiert werden\n    },\n    async einstellungHolen (key, standard)\n    {\n      console.log(\"Funktion einstellungHolen\");\n      console.log(\"Einstellung holen: \" + key);\n      const preferences = await Preferences.keys();\n      console.log(\"existierende Einstellungen: \" + preferences.toString());\n      if (preferences.keys.includes(key))\n      {\n        const r = (await Preferences.get({key: key})).value;\n        console.log(\"Einstellung vorhanden, Wert: \" + r);\n        return r;\n      }\n      console.log(\"Einstellung nicht vorhanden, Standardwert: \" + standard);\n      return standard;\n    },\n    async einstellungenPruefen(key, value)\n    {\n      console.log(\"Funktion einstellungenPruefen\");\n      const preferences = await Preferences.keys();\n      if (!preferences.keys.includes(key))\n      {\n        await Preferences.set({\n          key: key,\n          value: value\n        })\n      }\n    },\n    async initialisieren()\n    {\n      console.log(\"Funktion initialisieren\");\n      const status = BarcodeScanner.checkPermission({ force: true });\n      //BarcodeScanner.prepare();\n\n      await this.einstellungenPruefen('host', 'http://' + window.location.hostname + ':4000');\n      await this.einstellungenPruefen('modellidentifikation', 'Beispielmodell.json');\n      await this.einstellungenPruefen('montageplatz', 'Beispielplatz');\n\n      this.modelhost = await this.einstellungHolen('host', 'http://' + window.location.hostname + ':4000');\n      this.modellidentifikation = await this.einstellungHolen('modellidentifikation', 'Beispielmodell.json');\n      this.montageplatz = await this.einstellungHolen('montageplatz', 'Beispielplatz');\n\n      this.hostGeaendert();\n      this.modellInitialisieren();\n    },\n    anderesmodell() {\n      console.log(\"funktion anderesmodell\");\n      this.modellInitialisieren();\n    },\n    modellInitialisieren() {\n      console.log(\"funktion modellInitialisieren\");\n\n      var vm = this;\n\n      if (this.modellidentifikation == '')\n      {\n        console.log(\"modellidentifikation leer\");\n      } else {\n        axios.get(this.modelhost +'/Modelle/' + this.modellidentifikation)\n        .then(function (response){\n          console.log(response.data);\n          vm.Modell = response.data;\n          vm.RepertoireAbteilungen = response.data.RepertoireAbteilungen;\n          vm.RepertoireGruende = response.data.RepertoireGruende;\n          vm.RepertoireVerantwortliche = response.data.RepertoireVerantwortliche;\n          vm.Ziele = vm.Modell.VerantwortlicheAdressen;\n        });\n      }\n    },\n    modellSelectedSetzen()\n    {\n      //this.tmp_modelhost = this.modelhost;\n      var modellSelect = document.getElementById('modellSelect');\n\n      for(var i = 0; i < modellSelect.options.length; i++)\n      {\n        if(modellSelect.options[i].value == this.modellidentifikation)\n        {\n          modellSelect.options.selectedIndex = i;\n          break;\n        }\n      }\n    },\n    modelleInitialisieren()\n    {\n      var vm = this;\n\n      axios.get(this.modelhost +'/Modelle/' + this.modellidentifikation)\n      .then(function (response){\n        console.log(response.data);\n        vm.Modell = response.data;\n        vm.RepertoireAbteilungen = response.data.RepertoireAbteilungen;\n        vm.RepertoireGruende = response.data.RepertoireGruende;\n        vm.RepertoireVerantwortliche = response.data.RepertoireVerantwortliche;\n        vm.Ziele = vm.Modell.VerantwortlicheAdressen;\n\n        Vue.nextTick(() => { \n          const params = new URLSearchParams(window.location.search);\n\n          var ref_shortened = [];\n          for (var ref in vm.$refs)\n          {\n            if (ref.length > 3)\n            {\n              ref_shortened.push(ref.substring(3));\n            }\n          }\n\n          if(params.has('abt'))\n          {\n            const abt_query = params.get('abt');\n            const abt_array = abt_query.split(\";\");\n            abt_array.forEach(element => {\n              if(Array.prototype.includes.call(ref_shortened, element))\n              {\n                vm.$refs['abt' + element][0].handleClick();\n                vm.AuswahlAbteilungen.push(element);\n              }\n            });\n          }\n          if(params.has('gdk'))\n          {\n            const gdk_query = params.get('gdk');\n            const gdk_array = gdk_query.split(\";\");\n            gdk_array.forEach(element => {\n              if(Array.prototype.includes.call(ref_shortened, element))\n              {\n                vm.$refs['gdk' + element][0].handleClick();\n                vm.AuswahlGrund.push(element);\n              }\n            });\n          }\n          if(params.has('ver'))\n          {\n            const ver_query = params.get('ver');\n            const ver_array = ver_query.split(\";\");\n            ver_array.forEach(element => {\n              if(Array.prototype.includes.call(ref_shortened, element))\n              {\n                vm.$refs['ver' + element][0].handleClick();\n                vm.AuswahlVerantwortliche.push(element);\n              }\n            });\n          }\n        });\n      })\n      .finally(function(){ });\n    },\n    async einstellungenSpeichern(event)\n    {\n      console.log(\"einstellungenSpeichern: \");\n      \n      console.log(\"montageplatz: \" + this.montageplatz);\n      if (this.modelhost != this.tmp_modelhost)\n      {\n        console.log(\"Speichere modelhost: \" + this.modelhost);\n        await Preferences.set({\n          key: 'host',\n          value: this.modelhost\n        });\n        this.hostGeaendert();\n      } else {\n        console.log(\"modelhost unverÃ¤ndert\");\n      }\n      \n      await Preferences.set({\n        key: 'montageplatz',\n        value: this.montageplatz\n      });\n      var modellSelect = document.getElementById('modellSelect');\n      try {\n        var val = modellSelect.options[modellSelect.options.selectedIndex].value;\n        if (val != this.modellidentifikation)\n        {\n          this.modellidentifikation = val;\n          console.log(\"modellidentifikation: \" + val);\n          await Preferences.set({\n            key: 'modellidentifikation',\n            value: val\n          });\n          this.modellInitialisieren();\n        }\n      } catch {\n        await Preferences.set({\n          key: 'modellidentifikation',\n          value: this.modellidentifikation\n        });\n      }\n      \n    },\n    onVideoChange(e) {\n      const file = e.target.files[0];\n      console.log(String(file.duration));\n      this.video = file;\n    },\n    onComplete() {\n      var host = this.modelhost;//'http://' + window.location.hostname;\n\n      var content = {\n        Modellidentifikation: this.modellidentifikation,\n        AuswahlVerantwortliche: this.AuswahlVerantwortliche,\n        Abteilungen: this.AuswahlAbteilungen,\n        Grund: this.AuswahlGrund,\n        Text: this.freitext,\n        Montageplatz: this.montageplatz,\n        Baugruppe: this.baugruppe,\n        Auftrag: this.auftrag,\n      };\n\n      if (this.imageData != null)\n      {\n        content.Bild = this.imageData;\n      }\n\n      /*if (this.video != null)\n      {\n        content.Video = this.video;\n      }*/\n\n      this.loading = true;\n      document.getElementById(\"finishbtn\").disabled = true;\n\n      var vm = this;\n\n      axios({\n        method: 'post',\n        url: host + '/send',\n        data: content\n      }).then(function (response) {\n        if (response.status == 200) {\n          alert(\"Erfolgreich gemeldet!\");\n\n          vm.AuswahlAbteilungen = [];\n          vm.AuswahlGrund = [];\n          vm.AuswahlVerantwortliche = [];\n\n          window.location.reload(true);\n        } else {\n          alert(\"Melden fehlgeschlagen!\");\n        }\n      }).catch(error => {\n        alert(\"Melden fehlgeschlagen!\" + error);\n      }).finally(() => {\n        this.loading = false;\n        document.getElementById(\"finishbtn\").disabled = false;\n      });\n    },\n    setLoading: function(value) {\n      console.log(\"setLoading\");\n      \n    },\n    tabChange: function(tab1, tab2)\n    {\n      if (tab2 == 1)\n      {\n        if (this.MoeglicheGruende.length == 1)\n        {\n          var grund = this.MoeglicheGruende[0];\n          var r1 = this.$refs['gdk' + grund];\n          r1[0].handleClick();\n        }\n      }\n      if (tab2 == 3)\n      {\n        if (this.MoeglicheVerantwortliche.length == 1)\n        {\n          var verant = this.MoeglicheVerantwortliche[0];\n          var r2 = this.$refs['ver' + verant];\n          r2[0].handleClick();\n          //r[0].handleSelectChange(true);\n          //r[0].selected = true;\n          //this.AuswahlVerantwortliche = [this.MoeglicheVerantwortliche[0]];\n        }\n      }\n      console.log(\"tabChange\");\n    },\n    handleValidation: function(isValid, tabIndex) {\n      console.log('Tab: '+tabIndex+ ' valid: '+isValid);\n    },\n    handleErrorMessage: function(errorMsg) {\n      this.errorMsg = errorMsg;\n      console.log(\"Error: \" + this.errorMsg);\n    },\n    changeAbteilung()\n    {\n      console.log(Date.now() + \": changeAbteilung\");\n\n      this.BetroffeneAbteilungen = \"\";\n      this.AuswahlAbteilungen.forEach(element => {\n        this.BetroffeneAbteilungen = this.BetroffeneAbteilungen + \", \" + element;\n      });\n      if (this.BetroffeneAbteilungen != \"\") this.BetroffeneAbteilungen = this.BetroffeneAbteilungen.substring(2);\n\n      this.AuswahlGrund = [];\n      this.clearAuswahlGrund = !this.clearAuswahlGrund;\n      this.MoeglicheGruende.splice(0);\n      this.AuswahlAbteilungen.forEach(element => {\n        this.RepertoireGruende[element].forEach(element2 => {\n          this.MoeglicheGruende.splice(0, 0, element2);\n        })\n      });\n\n      this.changeGrund();\n    },\n    changeGrund(){\n      console.log(Date.now() + \": changeGrund\");\n\n      this.GewaehlteGruende = \"\";\n      this.AuswahlGrund.forEach(element => {\n        this.GewaehlteGruende = this.GewaehlteGruende + \", \" + element;\n      });\n      if (this.GewaehlteGruende != \"\") this.GewaehlteGruende = this.GewaehlteGruende.substring(2);\n\n      this.AuswahlVerantwortliche = [];\n      this.clearAuswahlVerantwortliche = !this.clearAuswahlVerantwortliche;\n      this.MoeglicheVerantwortliche.splice(0);\n      this.AuswahlAbteilungen.forEach(element => {\n        this.RepertoireVerantwortliche[element].forEach(element2 => {\n          this.MoeglicheVerantwortliche.splice(0, 0, element2);\n        })\n      });\n\n      /*if (this.MoeglicheVerantwortliche.length == 1)\n      {\n        var verant = this.MoeglicheVerantwortliche[0];\n        var r = this.$refs['ver' + verant];\n        //r.handleClick();\n        //r[0].handleSelectChange(true);\n        r[0].selected = true;\n        this.$forceUpdate();\n        this.AuswahlVerantwortliche = [this.MoeglicheVerantwortliche[0]];\n        console.log(this.AuswahlVerantwortliche);\n      }*/\n\n      this.changeVerantwortlicher();\n    },\n    changeVerantwortlicher(){\n      console.log(Date.now() + \": changeVerantwortlicher\");\n\n      this.GewaehlteVerantwortliche = \"\";\n      this.AuswahlVerantwortliche.forEach(element => {\n        this.GewaehlteVerantwortliche = this.GewaehlteVerantwortliche + \", \" + element;\n      });\n      if (this.GewaehlteVerantwortliche != \"\") this.GewaehlteVerantwortliche = this.GewaehlteVerantwortliche.substring(2);\n    },\n    validate () {\n      return new Promise((resolve, reject) => {\n        if (this.AuswahlAbteilungen.length)\n        {\n          resolve(true);\n        } else {\n          alert(\"Mindestens eine Abteilung auswÃ¤hlen!\");\n          reject(false);\n        }\n      }).catch((error) => {\n        console.log(\"validate error: \" + error);\n      });\n    },\n    validate2 () {\n      return new Promise((resolve, reject) => {\n        if (this.AuswahlGrund.length)\n        {\n          resolve(true);\n        } else {\n          alert(\"Grund auswÃ¤hlen!\");\n          reject(false);\n        }\n      }).catch((error) => {\n        console.log(\"validate error2: \" + error);\n      });\n    },\n    validate3 () {\n      console.log(\"validate3\");\n      return new Promise((resolve, reject) => {\n        if (this.AuswahlVerantwortliche.length)\n        {\n          resolve(true);\n        } else {\n          alert(\"Verantwortliche auswÃ¤hlen!\");\n          reject(false);\n        }\n      }).catch((error) => {\n        console.log(\"validate error3: \" + error);\n      });\n    },\n    validateAnlagen() {\n      console.log(\"validateAnlagen\");\n      return new Promise((resolve, reject) => {\n        if (this.displayScan)\n        {\n          resolve(true);\n        } else {\n          reject(false);\n        }\n      }).catch((error) => {\n        console.log(\"validateAnlagen error: \" + error);\n      });\n    },\n    oeffneVerantwortlicher: function(value)\n    {\n      console.log(\"oeffneVerantwortlicher\");\n    }\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin-top: 60px;\n  position: relative;\n}\n\n#editorContainer canvas {\n  max-width: 100%;\n  height: auto;\n}\n\n.color-selector {\n  height: 40px;\n  padding-bottom: 10px; /* add space below the color buttons */\n  padding-left: 10px;\n  padding-right: 10px;\n  margin:auto;\n}\n\n.color-selector button {\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  margin-left: 6px;\n  margin-right: 6px;\n  transition: all 0.3s ease; /* Smooth size change */\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3); /* Shadow for unselected buttons */\n  display: inline-block;\n}\n\n.color-selector .selected {\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* Shadow for selected buttons */\n}\n\n.color-selector .selected.light {\n  border: 2px solid #000; /* Black border for light colors */\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5), 0 0 0 1px #000; /* Add a black ring around the white border */\n}\n\n.color-selector .selected.dark {\n  border: 2px solid #fff; /* White border for dark colors */\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5), 0 0 0 1px #000; /* Add a black ring around the white border */\n}\n\n.color-selector button:last-child {\n  margin-right: 0;\n}\n\n\n.btn-group button {\n  background-color: white; /* Green background */\n  border: 1px solid white; /* Green border */\n  color: white; /* White text */\n  padding: 0px 0px; /* Some padding */\n  cursor: pointer; /* Pointer/hand icon */\n  float: left; /* Float the buttons side by side */\n  text-align: center;\n  display: inline;\n  vertical-align: middle;\n  font-size:72px;\n  height:100px;\n  width:100px;\n  padding-bottom: 10px;\n  border-radius: 5px;\n}\n\n/* Clear floats (clearfix hack) */\n.btn-group:after {\n  content: \"\";\n  clear: both;\n}\n\n.btn-group button:not(:last-child) {\n  border-right: none; /* Prevent double borders */\n}\n\n/* Add a background color on hover */\n.btn-group button:active:hover {\n  background-color: lightblue;\n}\n\n/* Selected Images */\n.selected {\n  border: 2px solid red;\n}\n\n.container {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.container {\n  display: flex;\n}\n.relative {\n  position: relative;\n  z-index: 1;\n}\n.square {\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  transition: 0.3s;\n}\n.square:after {\n  content: '';\n  top: 0;\n  display: block;\n  padding-bottom: 100%;\n}\n.square > div {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n.surround-cover {\n  box-shadow: 0 0 0 99999px rgba(0, 0, 0, 0.5);\n}\n.barcode-scanner--area--container {\n  width: 90%;\n  max-width: min(700px, 100vh);\n  margin: auto;\n}\n.barcode-scanner--area--outer {\n  display: flex;\n  border-radius: 1em;\n}\n.barcode-scanner--area--inner {\n  width: 100%;\n  margin: 1rem;\n  border: 2px solid #fff;\n  box-shadow: 0px 0px 2px 1px rgb(0 0 0 / 0.5),\n    inset 0px 0px 2px 1px rgb(0 0 0 / 0.5);\n  border-radius: 1rem;\n}\n\n.modal-gross {\n  max-width: 800px;\n  display: flex;\n  flex-direction: column;\n}\n\n.modal-flex {\n  max-width: 800px;\n  display: flex;\n  flex-direction: column;\n}\n\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}